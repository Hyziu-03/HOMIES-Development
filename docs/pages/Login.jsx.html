<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Login.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Login.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { Link, useNavigate } from 'react-router-dom';
import { GoogleAuthProvider, getAuth, signInWithPopup, FacebookAuthProvider, onAuthStateChanged, signInWithEmailAndPassword, setPersistence, browserSessionPersistence } from 'firebase/auth';
import Logo from '../comps/Logo';
import VisibilityIcon from '../svg/VisibilityIcon';

const auth = getAuth();
auth.languageCode = 'pl';

/**
 * Logging the user in with their email
 * @returns {boolean} Indicator if user has been logged in successfully
 */
const emailLogin = () => {

	const email = document.getElementById('email-login').value;
	const password = document.getElementById('password-login').value;

	setPersistence(auth, browserSessionPersistence)
		.then(() => {

			signInWithEmailAndPassword(auth, email, password);
			return true;

		})
		.catch((error) => console.error(error.message));

		return false;
	
}

/**
 * Logging the user in with their Google account
 */
const useGoogle = () => {

	const provider = new GoogleAuthProvider();

	signInWithPopup(auth, provider)
		.catch((error) => console.error(error.message));
	
}

/**
 * Logging the user in with their Facebook account 
 */
const useFacebook = () => {

	const provider = new FacebookAuthProvider();

	signInWithPopup(auth, provider)
		.catch((error) => console.error(error));

}

const Login = () => {

	const navigate = useNavigate();

	const handleLogin = () => {
		if (emailLogin()) navigate('/zbieranina');
	}

	onAuthStateChanged(auth, (user) => {
		if (user) navigate('/zbieranina');
	});

	return (
		&lt;article className='login'>
			&lt;Logo />
			&lt;form action='' method='' className='form'>
				&lt;input type='email' id='email-login' className='input' placeholder='Adres email' tabIndex='0' required/>
				&lt;span className='password-input'>
					&lt;span className='input password-bar'>
						&lt;input type='password' id='password-login' className='password-login' placeholder='Hasło' tabIndex='0' required/>&lt;VisibilityIcon />
					&lt;/span>
					&lt;p className='password-tooltip' tabIndex='0'>&lt;Link to='/odzyskaj-haslo' className='link'>Nie pamiętasz hasła?&lt;/Link>&lt;/p>
				&lt;/span>
				&lt;input type='button' value='Zaloguj się' id='button-login' className='button login-button link' onClick={handleLogin} required/>
			&lt;/form>
			&lt;section className='alt-login'>
				&lt;section className='social-media-login'>
					&lt;span className='social-media' tabIndex='0' onClick={useGoogle}>&amp;nbsp;Google&lt;/span>
					&lt;span className='social-media' tabIndex='0' onClick={useFacebook}>&amp;nbsp;Facebook&lt;/span>
				&lt;/section>
				&lt;footer>
					&lt;hr className='break'/>
					&lt;p className='help-message'>Nie masz konta? &amp;nbsp;&lt;span className='signup-link'>&lt;Link to='/rejestracja' className='link'>Zarejestruj się&lt;/Link>&lt;/span>&lt;/p>
				&lt;/footer>
			&lt;/section>
		&lt;/article>
	);
}

export default Login;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#createAccount">createAccount</a></li><li><a href="global.html#displayTiles">displayTiles</a></li><li><a href="global.html#emailLogin">emailLogin</a></li><li><a href="global.html#getCredentials">getCredentials</a></li><li><a href="global.html#isAuthorised">isAuthorised</a></li><li><a href="global.html#Topics">Topics</a></li><li><a href="global.html#useFacebook">useFacebook</a></li><li><a href="global.html#useGoogle">useGoogle</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Sun May 15 2022 12:23:10 GMT+0200 (czas środkowoeuropejski letni)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
